<!doctype html><html>
    <head>
      <meta http-equiv="content-type" content="text/html; charset=utf-8">
      <title>Harvesting & Brute-Forcing Tickets w/ Rubeus</title>
      <meta name="generator" content="CherryTree">
      <link rel="stylesheet" href="res/styles3.css" type="text/css" />
    </head>
    <body><div class='page'><h1 class='title'>Harvesting & Brute-Forcing Tickets w/ Rubeus</h1><br/>             <h3>To start this task you will need to RDP or SSH into the machine your credentials are -</h3><br /><br /><br /><br />    <br /><br /><br />Rubeus  is a powerful tool for attacking Kerberos. Rubeus is an adaptation of  the kekeo tool and developed by HarmJ0y the very well known active  directory guru.<br />Rubeus has a wide variety of attacks and features  that allow it to be a very versatile tool for attacking Kerberos. Just  some of the many tools and attacks include overpass the hash, ticket  requests and renewals, ticket management, ticket extraction, harvesting,  pass the ticket, AS-REP Roasting, and Kerberoasting.<br />The tool has  way too many attacks and features for me to cover all of them so I&#39;ll  be covering only the ones I think are most crucial to understand how to  attack Kerberos however I encourage you to research and learn more about  Rubeus and its whole host of attacks and features here - <a href="https://github.com/GhostPack/Rubeus">https://github.com/GhostPack/Rubeus</a><br /><small>Rubeus is already compiled and on the target machine.</small><br /><a href="https://i.imgur.com/2KTvdDp.png"><img src="images/68-1.png" alt="images/68-1.png" /></a><br /><h2>Harvesting Tickets w/ Rubeus - </h2><br />Harvesting  gathers tickets that are being transferred to the KDC and saves them  for use in other attacks such as the pass the ticket attack.<br />1.) <code>cd Downloads</code> - navigate to the directory Rubeus is in<br />2.) <code>Rubeus.exe harvest /interval:30</code> - This command tells Rubeus to harvest for TGTs every 30 seconds<br /><a href="https://i.imgur.com/VCeyyn9.png"><img src="images/68-2.png" alt="images/68-2.png" /></a><br /><h2>Brute-Forcing / Password-Spraying w/ Rubeus -</h2><br />Rubeus  can both brute force passwords as well as password spray user accounts.  When brute-forcing passwords you use a single user account and a  wordlist of passwords to see which password works for that given user  account. In password spraying, you give a single password such as  Password1 and &quot;spray&quot; against all found user accounts in the domain to  find which one may have that password.<br /><small>This  attack will take a given Kerberos-based password and spray it against  all found users and give a .kirbi ticket. This ticket is a TGT that can be used in order to get service tickets from the KDC as well as to be used in attacks like the pass the ticket attack.</small><br />Before  password spraying with Rubeus, you need to add the domain controller  domain name to the windows host file. You can add the IP and domain name  to the hosts file from the machine by using the echo command: <br /><code>echo 10.10.215.150 CONTROLLER.local &gt;&gt; C:\Windows\System32\drivers\etc\hosts</code><br /><small>1.) </small><code>cd Downloads</code> - navigate to the directory Rubeus is in<br /><small>2.) </small><code>Rubeus.exe brute /password:Password1 /noticket</code> - This will take a given password and &quot;spray&quot; it against all found users then give the .kirbi TGT for that user <br /><a href="https://i.imgur.com/WN4zVo5.png"><img src="images/68-3.png" alt="images/68-3.png" /></a><br />Be mindful of how you use this attack as it may lock you out of the network depending on the account lockout policies.<br /><br />        <br /></div></body></html>