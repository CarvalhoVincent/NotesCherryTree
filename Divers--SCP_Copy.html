<!doctype html><html>
    <head>
      <meta http-equiv="content-type" content="text/html; charset=utf-8">
      <title>SCP Copy</title>
      <meta name="generator" content="CherryTree">
      <link rel="stylesheet" href="res/styles3.css" type="text/css" />
    </head>
    <body><div class='page'><h1 class='title'>SCP Copy</h1><br/><br /><br /><br /><h1>How to Use SCP Command to Securely Transfer Files</h1><br />Updated  May 30, 2020<br />•4 min read<br /><br /><br /><br /><br /><br /><br />SCP (secure copy) is a command-line utility that allows you to securely copy files and directories between two locations.<br />With <code>scp</code>, you can copy a file or directory:<br />• From your local system to a remote system.<br />• From a remote system to your local system.<br />• Between two remote systems from your local system.<br /><br />When transferring data with <code>scp</code>, both the files and password are encrypted so that anyone snooping on the traffic doesn’t get anything sensitive.<br />In this tutorial, we will show you how to use the <code>scp</code> command through practical examples and detailed explanations of the most common scp options.<br /><br /><h2>SCP Command Syntax </h2><br />Before going into how to use the <code>scp</code> command, let’s start by reviewing the basic syntax.<br />The <code>scp</code> command syntax take the following form:<br /><code>scp [OPTION] [user@]SRC_HOST:]file1 [user@]DEST_HOST:]file2<br /></code><br /><br /><br /><br /><br /><br /><br />◇ <code>OPTION</code> - <a href="https://linux.die.net/man/1/scp">scp options</a>such as cipher, ssh configuration, ssh port, limit, recursive copy …etc.<br />◇ <code>[user@]SRC_HOST:]file1</code> - Source file.<br />◇ <code>[user@]DEST_HOST:]file2</code> - Destination file<br /><br />Local  files should be specified using an absolute or relative path, while  remote file names should include a user and host specification.<br /><code>scp</code> provides a number of options that control every aspect of its behavior. The most widely used options are:<br />◇ <code>-P</code> - Specifies the remote host ssh port.<br />◇ <code>-p</code> - Preserves files modification and access times.<br />◇ <code>-q</code> - Use this option if you want to suppress the progress meter and non-error messages.<br />◇ <code>-C</code> - This option forces <code>scp</code> to compresses the data as it is sent to the destination machine.<br />◇ <code>-r</code> - This option tells <code>scp</code> to copy directories recursively.<br /><br /><br /><h2>Before you Begin </h2><br />The <code>scp</code> command relies on <code>ssh</code> for data transfer, so it requires an ssh key or password to authenticate on the remote systems.<br />The colon (<code>:</code>) is how <code>scp</code> distinguish between local and remote locations.<br />To be able to copy files, you must have at least read permissions on the source file and write permission on the target system.<br />Be careful when copying files that share the same name and location on both systems, <code>scp</code> will overwrite files without warning.<br />When transferring large files, it is recommended to run the <code>scp</code> command inside a <a href="https://linuxize.com/post/how-to-use-linux-screen/">screen</a> or <a href="https://linuxize.com/post/getting-started-with-tmux/">tmux</a> session.<br /><br /><h2>Copy Files and Directories Between Two Systems with </h2><code><h2>scp</h2></code><h2> </h2><br /><br /><h3>Copy a Local File to a Remote System with the </h3><code><h3>scp</h3></code><h3> Command </h3><br /><br /><br />To copy a file from a local to a remote system run the following command:<br /><code>scp file.txt remote_username@10.10.0.2:/remote/directory</code>Where <code>file.txt</code> is the name of the file we want to copy, <code>remote_username</code> is the user on the remote server, <code>10.10.0.2</code> is the server IP address. The <code>/remote/directory</code>  is the path to the directory you want to copy the file to. If you don’t  specify a remote directory, the file will be copied to the remote user  home directory.<br />You will be prompted to enter the user password, and the transfer process will start.<br /><code>remote_username@10.10.0.2&#39;s password:<br />file.txt                             100%    0     0.0KB/s   00:00<br /></code>Omitting the filename from the destination location  copies the file with the original name. If you want to save the file  under a different name, you need to specify the new file name:<br /><code>scp file.txt remote_username@10.10.0.2:/remote/directory/newfilename.txt</code>If SSH on the remote host is listening on a port other than the default 22 then you can specify the port using the <code>-P</code> argument:<br /><code>scp -P 2322 file.txt remote_username@10.10.0.2:/remote/directory</code>The command to copy a directory is much like as when copying files. The only difference is that you need to use the <code>-r</code> flag for recursive.<br />To copy a directory from a local to remote system, use the <code>-r</code> option:<br /><code>scp -r /local/directory remote_username@10.10.0.2:/remote/directory</code><br /><br /><br /><h3>Copy a Remote File to a Local System using the </h3><code><h3>scp</h3></code><h3> Command </h3><br />To copy a file from a remote to a local system, use the remote location as a source and local location as the destination.<br />For example to copy a file named <code>file.txt</code> from a remote server with IP <code>10.10.0.2</code> run the following command:<br /><code>scp remote_username@10.10.0.2:/remote/file.txt /local/directory</code>If you haven’t set a <a href="https://linuxize.com/post/how-to-setup-passwordless-ssh-login/">passwordless SSH login</a> to the remote machine, you will be asked to enter the user password.<br /><br /><h3>Copy a File Between Two Remote Systems using the </h3><code><h3>scp</h3></code><h3> Command </h3><br />Unlike <a href="https://linuxize.com/post/how-to-use-rsync-for-local-and-remote-data-transfer-and-synchronization/">rsync</a> , when using <code>scp</code> you don’t have to log in to one of the servers to transfer files from one to another remote machine.<br />The following command will copy the file <code>/files/file.txt</code> from the remote host <code>host1.com</code> to the directory <code>/files</code> on the remote host <code>host2.com</code>.<br /><code>scp user1@host1.com:/files/file.txt user2@host2.com:/files</code>You  will be prompted to enter the passwords for both remote accounts. The  data will be transfer directly from one remote host to the other.<br />To route the traffic through the machine on which the command is issued, use the <code>-3</code> option:<br /><code>scp -3 user1@host1.com:/files/file.txt user2@host2.com:/files</code><br /><h2>Conclusion </h2><br />In this tutorial, you learned how to use the <code>scp</code> command to copy files and directories.<br />You may also want to set up an <a href="https://linuxize.com/post/how-to-setup-passwordless-ssh-login/">SSH key-based authentication</a> and connect to your Linux servers without entering a password.<br />If you are regularly connecting to the same systems, you can simplify your workflow by defining all of your connections in the <a href="https://linuxize.com/post/using-the-ssh-config-file/">SSH config file</a> .<br /></div></body></html>